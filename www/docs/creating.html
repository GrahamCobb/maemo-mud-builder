<p>Currently best supported are simple command line utilities without many
build dependencies. For the sake of this example we'll duplicate the existing
<code>cal</code> package, but additionally patch it to provide some
Maemo-specific behaviour.. It is assumed that the previous tutorial has been
folowed and that mud is installed and the alias set.</p>

<ol>
<li>Switch to the SDK_PC target.</li>

<li>Create a file, <code>packages/mycal.xml</code>:

<pre><code>&lt;package&gt;
    &lt;fetch type=&quot;debian&quot;&gt;

        &lt;name&gt;cal&lt;/name&gt;
    &lt;/fetch&gt;
&lt;/package&gt;</code></pre>
</li>

<li>Extract the source to <code>build/mycal/.build</code>:

<pre><code>mud get mycal</code></pre>

<span class="note"><code>.build</code> is a symlink to whatever source directory is unpacked, in this case <code>cal-3.5</code>.</span></li>

<li>Change to the build directory:

<pre><code>cd build/mycal/.build</code></pre>
</li>

<li>We want to brand the calendar for Maemo, so we'll modify a source file, change <code>source/cal.c</code>, line 574 from:

<pre><code>fputs(&quot;\t\t\t\t &quot;, stdout);</code></pre>

&#8230;to&#8230;

<pre><code>fputs(&quot;\t\t\t\tMaemo in &quot;, stdout);</code></pre>
</li>

<li>Check your modifications build and install:

<pre><code>mud compile mycal
&#8230;
fakeroot dpkg -i ../../../upload/ccal*.deb
&#8230;
ccal 2007</code></pre>

</li>

<li>If happy with your Maemo port, we now need to generate the patch for it to
be submitted to the <em>mud-builder</em> project so that it is always applied
in future. Check that the local Subversion repository contains only the changes you want:

<pre><code>svn status</code></pre>

Note that the <code>source/cal.c</code> line is prefixed with &quot;M&quot; for
<em>modified</em>. This is what we want, note also the auto-changes to
<code>debian/control</code>. We don't want to store this as it can be easily
regenerated by <code>mud-builder</code> so revert that file and then save the
patch into your local copy of <em>mud-builder</em>:

<pre><code>svn diff debian/control
svn revert debian/control
mud diff mycal</code></pre>

<span class="note">Files marked with a &quot;?&quot; are unknown to Subversion and are usually ignorable side effects of the build. If you add a new file, use <code>svn add &lt;path&gt;</code> to include it in the diff.</span>
</li>

<li>Send <code>packages/mycal.xml</code> and
<code>packages/patch/mycal.patch</code> to the <a
href="https://garage.maemo.org/mailman/listinfo/mud-builder-users">mud-builder-users</a>
mailing list.</li>

<li>Tidy up:

<pre><code>mud clean mycal</code></pre>

<span class="note">Because our changes were saved in
<code>packages/patch/mycal.patch</code>, the next time that <code>mud get
mycal</code> is run the patch will be re-applied after the source is
unpacked.</span>

</li>
</ol>

<p>There is reference documentation available on the <a
href="index.php?id=packageformat">XML-file package format</a>.</p>

