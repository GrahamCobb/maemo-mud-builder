<html><head><title>MUD::Package</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="black with blue on white" type="text/css" href="../_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with magenta on white" type="text/css" href="../_black_with_magenta_on_white.css" media="all" >
<link rel="alternate stylesheet" title="black with cyan on white" type="text/css" href="../_black_with_cyan_on_white.css" media="all" >
<link rel="alternate stylesheet" title="white with purple on black" type="text/css" href="../_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with navy blue on black" type="text/css" href="../_white_with_navy_blue_on_black.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on black" type="text/css" href="../_grey_with_green_on_black.css" media="all" >
<link rel="alternate stylesheet" title="white with green on grey" type="text/css" href="../_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="black with green on grey" type="text/css" href="../_black_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="grey with green on white" type="text/css" href="../_grey_with_green_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless black with blue on white" type="text/css" href="../_indexless_black_with_blue_on_white.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with purple on black" type="text/css" href="../_indexless_white_with_purple_on_black.css" media="all" >
<link rel="alternate stylesheet" title="indexless white with green on grey" type="text/css" href="../_indexless_white_with_green_on_grey.css" media="all" >
<link rel="alternate stylesheet" title="indexless grey with green on white" type="text/css" href="../_indexless_grey_with_green_on_white.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.03,
  using Pod::Simple::PullParser v2.02,
  under Perl v5.010000 at Sat Jan 24 21:05:17 2009 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#METHODS'>METHODS</a>
  <li class='indexItem indexItem1'><a href='#COPYRIGHT'>COPYRIGHT</a>
  <li class='indexItem indexItem1'><a href='#SEE_ALSO'>SEE ALSO</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>MUD::Package - Define a MUD package,
and the data/definitions contained within.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use MUD::Package;
    my $pkg = MUD::Package-&#62;new();
    $pkg-&#62;load(&#39;vim&#39;);
    my $name          = $pkg-&#62;name;
    my $iconFile      = $pkg-&#62;icon(26);
    my $description   = $pkg-&#62;description;
    my $upgradeDesc   = $pkg-&#62;upgradeDescription;
    my $displayName   = $pkg-&#62;displayName;
    my @patchFiles    = $pkg-&#62;patches;
    my $controlFields = $pkg-&#62;controlFields;
    my $section       = $pkg-&#62;section;
    my $version       = $pkg-&#62;version;
    my @extras        = $pkg-&#62;extras;
    
    MUD::Package::setField($controlData, &#39;Section&#39;, &#39;user/network&#39;);
    my @values = MUD::Package::parseField($controlData, &#39;Section&#39;);</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
>DESCRIPTION</a></h1>

<p>This class abstracts <a href="../MUD/Build.html" class="podlinkpod"
>MUD::Build</a> from the underlying container format for MUD packages. This allows for future expansion in changing the disk structure etc. by changing this class alone. Given a package name, it will find the various artifacts: XML definition, icons etc.</p>

<p>There are also convenience methods for dealing with Debian control files, see <a href="#setField" class="podlinkpod"
>&#34;setField&#34;</a> and <a href="#parseField" class="podlinkpod"
>&#34;parseField&#34;</a>.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="METHODS"
>METHODS</a></h1>

<dl>
<dt><a name="new(_[ORIGINAL]_)"
>new( [ORIGINAL] )</a></dt>

<dd>
<p>Create a new package instance. This can be optionally initialised by passing in an existing package as <code>ORIGINAL</code>.</p>

<dt><a name="_init"
>_init</a></dt>

<dd>
<p>Initialise a new instance. Private method.</p>

<dt><a name="load(_NAME_)"
>load( NAME )</a></dt>

<dd>
<p>Load information for the given package into this object. This will load an XML file from <code>PACKAGES_DIR/name.xml</code>, run any SDK-specific XSLT and initialise any environment variables defined for the build.</p>

<dt><a name="name"
>name</a></dt>

<dd>
<p>Return the package&#39;s name.</p>

<dt><a name="icon(_SIZE_)"
>icon( SIZE )</a></dt>

<dd>
<p>Return a path to a file containing an icon of the specified size. If <a href="../ImageMagick.html" class="podlinkpod"
>ImageMagick</a> is installed, it will be used to convert any icon found to the given size (as both width and height). If multiple icons are available, the one with a filename containing a number closest to <code>SIZE</code> is used either directly, or as the resize source.</p>

<p>The file returned will <i>not</i> be within the build directory, and so cannot be directly used as a reference within <code>debian/rules</code>.</p>

<p>If no appropriate icon can be found, <code>undef</code> is returned.</p>

<dt><a name="description"
>description</a></dt>

<dd>
<p>Return this package&#39;s description. This can be sourced from a file, or directly embedded within the XML.</p>

<dt><a name="upgradeDescription"
>upgradeDescription</a></dt>

<dd>
<p>Return the short description of the reason this package has been updated. This can be sourced from a file, or directly embedded within the XML.</p>

<dt><a name="displayName"
>displayName</a></dt>

<dd>
<p>Return the name which should be displayed as a human-readable, user-friendly variant in Application Manager.</p>

<dt><a name="patches"
>patches</a></dt>

<dd>
<p>Return an array of patch files which should be applied against the unpacked source before building. If no patches are to be applied, returns an empty list.</p>

<pre>    my @values = $pkg-&#62;patches;</pre>

<dt><a name="controlFields"
>controlFields</a></dt>

<dd>
<p>Return a hash reference of values which contain additional <code>debian/control</code> fields to set.</p>

<pre>    my $values = $pkg-&#62;controlFields;</pre>

<dt><a name="section"
>section</a></dt>

<dd>
<p>Return the section which this package should be in. If no section is explicitly specified then, for <i>non-</i>libraries, <code>user/</code> is prefixed.</p>

<dt><a name="version_[(_VERSION_)]"
>version [( VERSION )]</a></dt>

<dd>
<p>Set or return the version number which should be used for this package. Setting the version number can be done by sub-classes of <a href="../MUD/Fetch.html" class="podlinkpod"
>MUD::Fetch</a>, if they have managed to work out the version number from (say) an upstream URL. However, this can <i>always</i> be overridden by specifying the version in the <code>deb</code> section of the package XML.</p>

<dt><a name="extras"
>extras</a></dt>

<dd>
<p>Return an array of <a href="../MUD/ExtrasEntry.html" class="podlinkpod"
>MUD::ExtrasEntry</a>s which should be copied into <code>mud-extras</code> in the source tree, and made available to the build scripts.</p>

<p>Files in the package&#39;s <code>extras</code> directory will be returned here, with (optional) metadata loaded from <code>extras.xml</code>.</p>

<p>If the package is the <code>.pkg</code> directory format, the following special files in the directory - if present - are automatically added to the returned list:</p>

<dl>
<dt><a name="package-26.png_=&#62;_/usr/share/icons/hicolor/26x26/hildon/package.png"
><i>package</i>-26.png =&#62; <code>/usr/share/icons/hicolor/26x26/hildon/<i>package</i>.png</code>
<dt><a name="package-64.png_=&#62;_/usr/share/icons/hicolor/scalable/hildon/package.png"
><i>package</i>-64.png =&#62; <code>/usr/share/icons/hicolor/scalable/hildon/<i>package</i>.png</code>
<dt><a name="package.desktop_=&#62;_/usr/share/applications/hildon/package.desktop"
><i>package</i>.desktop =&#62; <code>/usr/share/applications/hildon/<i>package</i>.desktop</code>
<dt><a name="package.service_=&#62;_/usr/share/applications/hildon/package.desktop"
><i>package</i>.service =&#62; <code>/usr/share/applications/hildon/<i>package</i>.desktop</code></a></dt>
</dl>

<p>If no extra files are to be installed, an empty list is returned.</p>

<dt><a name="parseField(_FIELD,_DATA_)"
>parseField( FIELD, DATA )</a></dt>

<dd>
<p>Utility method for reading a field from a Debian control file and returning the array of lines which makes it up.</p>

<pre>    my ($value) = MUD::Package::parseField(&#39;Version&#39;, $controlData);</pre>

<dt><a name="setField(_DATA,_FIELD,_VALUE_)"
>setField( DATA, FIELD, VALUE )</a></dt>

<dd>
<p>Utility method for setting a field within a Debian control file. The value of <code>DATA</code> is changed in place; no value is returned.</p>

<pre>    MUD::Package::setField($controlData, &#39;Version&#39;, $value);</pre>

<p>If <code>VALUE</code> is undefined, no change is made to <code>DATA</code>.</p>

<dt><a name="readFile(_FILE_)"
>readFile( FILE )</a></dt>

<dd>
<p>Utility method for reading the contents of a file. (Any newlines in the file are converted into <code>\n</code>. - DISABLED)</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="COPYRIGHT"
>COPYRIGHT</a></h1>

<p>(c) Andrew Flegg 2007 - 2009. Released under the Artistic Licence: <a href="http://www.opensource.org/licenses/artistic-license-2.0.php" class="podlinkurl"
>http://www.opensource.org/licenses/artistic-license-2.0.php</a></p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SEE_ALSO"
>SEE ALSO</a></h1>

<p><a href="http://mud-builder.garage.maemo.org/" class="podlinkurl"
>http://mud-builder.garage.maemo.org/</a></p>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
